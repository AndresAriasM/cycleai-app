// src/styles/components/_forms.scss

// ========================================
// FORM COMPONENTS - CycleAI
// ========================================

// Form containers
.form {
    &__group {
      margin-bottom: $space-6;
      
      &--inline {
        display: flex;
        align-items: center;
        gap: $space-4;
        margin-bottom: $space-4;
      }
    }
    
    &__row {
      display: grid;
      gap: $space-4;
      
      @include respond-to(md) {
        grid-template-columns: repeat(2, 1fr);
        
        &--three {
          grid-template-columns: repeat(3, 1fr);
        }
        
        &--four {
          grid-template-columns: repeat(4, 1fr);
        }
      }
    }
  }
  
  // Labels
  .label {
    display: block;
    font-weight: 600;
    font-size: $font-sm;
    color: $text-primary;
    margin-bottom: $space-2;
    line-height: 1.5;
    
    &--required {
      &::after {
        content: ' *';
        color: $error;
      }
    }
    
    &--inline {
      display: flex;
      align-items: center;
      margin-bottom: 0;
      cursor: pointer;
      
      input[type="checkbox"],
      input[type="radio"] {
        margin-right: $space-2;
      }
    }
  }
  
  // Input fields
  .input {
    @include input-base;
    
    &--sm {
      padding: $space-2 $space-3;
      font-size: $font-sm;
    }
    
    &--lg {
      padding: $space-5 $space-6;
      font-size: $font-lg;
    }
    
    &--error {
      border-color: $error;
      
      &:focus {
        border-color: $error;
        box-shadow: 0 0 0 3px rgba($error, 0.1);
      }
    }
    
    &--success {
      border-color: $success;
      
      &:focus {
        border-color: $success;
        box-shadow: 0 0 0 3px rgba($success, 0.1);
      }
    }
  }
  
  // Select
  .select {
    @include input-base;
    cursor: pointer;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right $space-3 center;
    background-repeat: no-repeat;
    background-size: 1.5em 1.5em;
    padding-right: $space-10;
    
    &:focus {
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%234f46e5' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    }
    
    &--sm {
      padding: $space-2 $space-8 $space-2 $space-3;
      font-size: $font-sm;
    }
    
    &--lg {
      padding: $space-5 $space-12 $space-5 $space-6;
      font-size: $font-lg;
    }
  }
  
  // Textarea
  .textarea {
    @include input-base;
    min-height: 120px;
    resize: vertical;
    line-height: 1.6;
    
    &--sm {
      padding: $space-2 $space-3;
      font-size: $font-sm;
      min-height: 80px;
    }
    
    &--lg {
      padding: $space-5 $space-6;
      font-size: $font-lg;
      min-height: 160px;
    }
  }
  
  // Checkbox & Radio
  .checkbox,
  .radio {
    position: relative;
    display: inline-flex;
    align-items: center;
    cursor: pointer;
    
    input {
      position: absolute;
      opacity: 0;
      cursor: pointer;
      
      &:checked + .checkbox__indicator {
        background: $primary-600;
        border-color: $primary-600;
        
        &::after {
          opacity: 1;
          transform: translate(-50%, -50%) scale(1);
        }
      }
      
      &:checked + .radio__indicator {
        background: $primary-600;
        border-color: $primary-600;
        
        &::after {
          opacity: 1;
          transform: translate(-50%, -50%) scale(1);
        }
      }
      
      &:focus + .checkbox__indicator,
      &:focus + .radio__indicator {
        box-shadow: 0 0 0 3px rgba($primary-600, 0.1);
      }
      
      &:disabled + .checkbox__indicator,
      &:disabled + .radio__indicator {
        background: $gray-100;
        border-color: $gray-300;
        cursor: not-allowed;
      }
    }
    
    &__indicator {
      width: 20px;
      height: 20px;
      border: 2px solid $gray-300;
      background: white;
      margin-right: $space-3;
      transition: all 0.2s ease;
      position: relative;
      flex-shrink: 0;
      
      &::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        opacity: 0;
        transform: translate(-50%, -50%) scale(0);
        transition: all 0.2s ease;
      }
    }
    
    &__label {
      font-size: $font-base;
      color: $text-primary;
      line-height: 1.5;
      cursor: pointer;
    }
  }
  
  .checkbox {
    .checkbox__indicator {
      border-radius: $radius-sm;
      
      &::after {
        width: 6px;
        height: 10px;
        border: solid white;
        border-width: 0 2px 2px 0;
        transform: translate(-50%, -60%) rotate(45deg) scale(0);
      }
    }
  }
  
  .radio {
    .radio__indicator {
      border-radius: 50%;
      
      &::after {
        width: 8px;
        height: 8px;
        background: white;
        border-radius: 50%;
      }
    }
  }
  
  // Switch/Toggle
  .switch {
    position: relative;
    display: inline-flex;
    align-items: center;
    cursor: pointer;
    
    input {
      position: absolute;
      opacity: 0;
      cursor: pointer;
      
      &:checked + .switch__track {
        background: $primary-600;
        
        .switch__thumb {
          transform: translateX(22px);
        }
      }
      
      &:focus + .switch__track {
        box-shadow: 0 0 0 3px rgba($primary-600, 0.1);
      }
      
      &:disabled + .switch__track {
        background: $gray-200;
        cursor: not-allowed;
        
        .switch__thumb {
          background: $gray-400;
        }
      }
    }
    
    &__track {
      width: 48px;
      height: 26px;
      background: $gray-300;
      border-radius: 13px;
      transition: all 0.3s ease;
      position: relative;
      margin-right: $space-3;
    }
    
    &__thumb {
      width: 22px;
      height: 22px;
      background: white;
      border-radius: 50%;
      position: absolute;
      top: 2px;
      left: 2px;
      transition: all 0.3s ease;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }
    
    &__label {
      font-size: $font-base;
      color: $text-primary;
      line-height: 1.5;
      cursor: pointer;
    }
  }
  
  // File input
  .file-input {
    position: relative;
    display: inline-block;
    cursor: pointer;
    
    input[type="file"] {
      position: absolute;
      left: -9999px;
      opacity: 0;
    }
    
    &__trigger {
      @include button-outline;
      display: inline-flex;
      align-items: center;
      gap: $space-2;
      
      &:hover {
        background: $primary-50;
      }
    }
    
    &--drag {
      width: 100%;
      padding: $space-12 $space-6;
      border: 2px dashed $gray-300;
      border-radius: $radius-lg;
      text-align: center;
      transition: all 0.3s ease;
      background: $gray-50;
      
      &:hover,
      &.drag-over {
        border-color: $primary-600;
        background: $primary-50;
      }
      
      .file-input__icon {
        width: 48px;
        height: 48px;
        margin: 0 auto $space-4;
        color: $gray-400;
      }
      
      .file-input__text {
        color: $text-secondary;
        margin-bottom: $space-2;
      }
      
      .file-input__hint {
        color: $text-tertiary;
        font-size: $font-sm;
      }
    }
  }
  
  // Input groups
  .input-group {
    display: flex;
    align-items: stretch;
    
    .input {
      border-radius: 0;
      
      &:first-child {
        border-top-left-radius: $radius-lg;
        border-bottom-left-radius: $radius-lg;
      }
      
      &:last-child {
        border-top-right-radius: $radius-lg;
        border-bottom-right-radius: $radius-lg;
      }
      
      &:not(:first-child) {
        border-left: none;
      }
      
      &:focus {
        z-index: 1;
        position: relative;
      }
    }
    
    &__addon {
      display: flex;
      align-items: center;
      padding: $space-3 $space-4;
      background: $gray-100;
      border: 2px solid $gray-300;
      font-size: $font-base;
      color: $text-secondary;
      white-space: nowrap;
      
      &:first-child {
        border-top-left-radius: $radius-lg;
        border-bottom-left-radius: $radius-lg;
        border-right: none;
      }
      
      &:last-child {
        border-top-right-radius: $radius-lg;
        border-bottom-right-radius: $radius-lg;
        border-left: none;
      }
    }
    
    .btn {
      border-radius: 0;
      
      &:first-child {
        border-top-left-radius: $radius-lg;
        border-bottom-left-radius: $radius-lg;
      }
      
      &:last-child {
        border-top-right-radius: $radius-lg;
        border-bottom-right-radius: $radius-lg;
      }
    }
  }
  
  // Form feedback
  .form-feedback {
    margin-top: $space-2;
    font-size: $font-sm;
    line-height: 1.5;
    
    &--error {
      color: $error;
    }
    
    &--success {
      color: $success;
    }
    
    &--warning {
      color: $warning;
    }
    
    &--info {
      color: $info;
    }
  }
  
  // Form help text
  .form-help {
    margin-top: $space-2;
    font-size: $font-sm;
    color: $text-tertiary;
    line-height: 1.5;
  }
  
  // Fieldset
  .fieldset {
    border: 2px solid $gray-200;
    border-radius: $radius-lg;
    padding: $space-6;
    margin-bottom: $space-6;
    
    .legend {
      font-weight: 600;
      font-size: $font-lg;
      color: $text-primary;
      padding: 0 $space-3;
      background: $bg-primary;
    }
  }